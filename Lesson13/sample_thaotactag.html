<!DOCTYPE html>
<html>
<head>
	<title>Thao tác tag bằng jQuery</title>
	<meta charset="utf-8">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
</head>
<body>
	<!-- Grey with black text -->
	<nav class="navbar navbar-expand-sm bg-primary navbar-dark">
	  <ul class="navbar-nav">
	    <li class="nav-item active">
	      <a class="nav-link" href="#">Active</a>
	    </li>
	    <li class="nav-item">
	      <a class="nav-link" href="#">Link</a>
	    </li>
	    <li class="nav-item">
	      <a class="nav-link" href="#">Link</a>
	    </li>
	    <li class="nav-item">
	      <a class="nav-link disabled" href="#">Disabled</a>
	    </li>
	  </ul>
	</nav>

	<div class="container" style="margin-top: 15px;">
		<div class="row">
			<div class="col-md-5">
				<table class="table table-hover table-bordered">
					<thead>
						<tr>
							<th>STT</th>
							<th>Image</th>
							<th>Title</th>
							<th>Num</th>
							<th>Price</th>
							<th>Total Price</th>
						</tr>
					</thead>
					<tbody id="cardList">
					</tbody>
				</table>
			</div>
			<div class="col-md-7">
				<div class="row" id="product_items">
					
				</div>
			</div>
		</div>
	</div>

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<!-- Popper JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

	<script type="text/javascript">
		var dataList = [
			{
				'thumbnail': 'https://vn-test-11.slatic.net/p/8a2f26d7650878d180211cc5dd891c2e.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://viettinlaw.com/wp-content/uploads/2013/11/red-bull.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://www.euroasiaie.com/wp-content/uploads/2020/02/Buy-Red-Bull-Energy-Drink-Red-Edition-Flavour-Pack-of-12.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://cdn.tgdd.vn/Products/Images/3226/195232/bhx/10-chai-nuoc-tang-luc-redbull-150ml-202005061426044655.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://mekongvape.vn/uploads/plugin/product_items/758/1587530515-1234837576-red-bull-salt.png',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://vapemytho.com/wp-content/uploads/2020/05/67985f4dba3759690026-2412-600x800-1.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://vn-test-11.slatic.net/p/8a2f26d7650878d180211cc5dd891c2e.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}, {
				'thumbnail': 'https://vn-test-11.slatic.net/p/8a2f26d7650878d180211cc5dd891c2e.jpg',
				'title': 'Red Bull',
				'price': '10000'
			}
		]
		cardItems = []

		$(function() {
			loadData()
		})

		function loadData() {
			for (var i = 0; i < dataList.length; i++) {
				$('#product_items').append(`<div class="col-md-3" onclick="clickItem(${i})" style="cursor: pointer">
						<img src="${dataList[i].thumbnail}" width="100%">
						<p style="text-align: center;">${dataList[i].title}</p>
						<p style="text-align: center;">$'$'{dataList[i].price}</p>
					</div>`)
			}
		}

		function clickItem(index) {
			if(cardItems[index] === undefined) {
				cardItems[index] = {
					'thumbnail': dataList[index].thumbnail,
					'title': dataList[index].title,
					'price': dataList[index].price,
					'number': 1
				}
			} else {
				cardItems[index].number++
			}

			console.log(cardItems)
			$('#cardList').empty()
			count = 0
			for (var i = 0; i < cardItems.length; i++) {
				p = cardItems[i]
				if(p === undefined) continue;
				$('#cardList').append(`<tr>
							<td>${++count}</td>
							<td><img src="${p.thumbnail}" width="100px"></td>
							<td>${p.title}</td>
							<td>${p.number}</td>
							<td>${p.price}</td>
							<td>${p.price * p.number}</td>
						</tr>`)
			}
		}
	</script>
</body>
</html>
